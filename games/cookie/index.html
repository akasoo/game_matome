<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ã‚¯ãƒƒã‚­ãƒ¼å·¥æˆ¿ - ã‚¯ãƒªãƒƒã‚¯æ”¾ç½®ã‚²ãƒ¼ãƒ </title>
<meta name="description" content="ã‚¯ãƒªãƒƒã‚¯ã§ã‚¯ãƒƒã‚­ãƒ¼ã‚’ç„¼ã„ã¦ã€å»ºç‰©ã¨ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§å¢—ã‚„ã—ã¦ã„ãæ”¾ç½®ç³»ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ã€‚">
<style>
  :root{
    --bg:#0f1320; --panel:#141a2b; --border:#1f2940; --txt:#e8f0ff;
    --muted:#93a4c4; --acc:#ffb703; --good:#22c55e; --bad:#ef4444;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--txt); font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
    background:
      radial-gradient(900px 600px at 10% -10%, #20305f33, transparent),
      radial-gradient(800px 700px at 120% 20%, #0a162b66, transparent),
      var(--bg);
    display:flex; align-items:center; justify-content:center; padding:16px;
  }
  .wrap{width:min(1100px,95vw); display:grid; gap:16px; grid-template-columns: 1.3fr 1fr;}
  .card{background:var(--panel); border:1px solid var(--border); border-radius:18px; padding:16px}
  h1{margin:0 0 6px; font-size:clamp(18px,3vw,24px)}
  .muted{color:var(--muted)}
  .big{font-size:clamp(26px,6vw,42px); font-weight:800}
  .cookie{
    width:min(300px,46vw); aspect-ratio:1/1; border-radius:999px; border:8px solid #3b2f22;
    background: radial-gradient(60% 60% at 30% 30%, #d7a86f, #b07b4a) center/cover;
    box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 6px 40px #0006;
    cursor:pointer; user-select:none; display:flex; align-items:center; justify-content:center;
    margin:10px auto;
  }
  .cookie:active{transform:translateY(1px) scale(.99)}
  .cols{display:grid; grid-template-columns:1fr; gap:12px}
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .pill{border:1px solid #ffffff22; padding:6px 10px; border-radius:999px; color:var(--muted); font-size:12px}
  .btn{appearance:none; border:none; border-radius:10px; padding:10px 14px; background:#273352; color:#cfe1ff; cursor:pointer}
  .btn.primary{background:linear-gradient(180deg,#ffd166,#ffb703); color:#1a1300; font-weight:800}
  .btn:disabled{opacity:.5; cursor:not-allowed}
  .list{display:grid; gap:10px; max-height:60vh; overflow:auto; padding-right:4px}
  .item{display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:center; border:1px solid var(--border); padding:10px; border-radius:12px; background:#0f1527}
  .item .name{font-weight:700}
  .price{color:#ffd166}
  .note{font-size:12px; color:var(--muted)}
  .hr{height:1px; background:var(--border); margin:8px 0}
  .right{display:flex; flex-direction:column; gap:12px}
  .tiny{font-size:12px}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>ğŸª ã‚¯ãƒƒã‚­ãƒ¼å·¥æˆ¿</h1>
    <div class="muted tiny">ã‚¯ãƒªãƒƒã‚¯ã§ã‚¯ãƒƒã‚­ãƒ¼ã‚’ç„¼ã“ã†ã€‚å»ºç‰©ã¨ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§ç”Ÿç”£ã‚’åŠ é€Ÿï¼</div>

    <div class="row" style="justify-content:space-between;margin-top:8px">
      <div class="pill">åˆè¨ˆï¼š<b id="cookies">0</b> æš</div>
      <div class="pill">CPSï¼š<b id="cps">0</b> /ç§’</div>
      <div class="pill">CPCï¼š<b id="cpc">1</b> /ã‚¯ãƒªãƒƒã‚¯</div>
    </div>

    <button class="cookie" id="cookieBtn" aria-label="ã‚¯ãƒƒã‚­ãƒ¼ã‚’ç„¼ã">
      <div class="big" id="onCookie">CLICK!</div>
    </button>

    <div class="row" style="justify-content:center">
      <button class="btn primary" id="buyClick">ã‚¯ãƒªãƒƒã‚¯å¼·åŒ–ï¼ˆ+1 CPCï¼‰<span class="price" id="clickCost">ä¾¡æ ¼ 15</span></button>
      <button class="btn" id="saveBtn">æ‰‹å‹•ã‚»ãƒ¼ãƒ–</button>
      <button class="btn" id="exportBtn">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
      <button class="btn" id="importBtn">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
      <button class="btn" id="resetBtn">åˆæœŸåŒ–</button>
    </div>

    <div class="hr"></div>
    <div class="cols">
      <div class="list" id="buildingsList" aria-label="å»ºç‰©ä¸€è¦§"></div>
      <div class="list" id="upgradesList" aria-label="ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ä¸€è¦§"></div>
    </div>
  </div>

  <div class="card right">
    <div>
      <div class="muted">çµ±è¨ˆ</div>
      <div class="tiny">ãƒ—ãƒ¬ã‚¤æ™‚é–“ï¼š<span id="playtime">0:00:00</span></div>
      <div class="tiny">ç´¯è¨ˆã‚¯ãƒªãƒƒã‚¯ï¼š<span id="clicks">0</span></div>
      <div class="tiny">æœ€çµ‚ã‚»ãƒ¼ãƒ–ï¼š<span id="lastSave">-</span></div>
      <div class="tiny">æœ€çµ‚ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼š<span id="lastQuit">-</span></div>
    </div>
    <div>
      <div class="muted">ãƒ’ãƒ³ãƒˆ</div>
      <ul class="tiny" style="margin:6px 0 0 18px;line-height:1.6">
        <li>å»ºç‰©ã¯è‡ªå‹•ã§CPSï¼ˆæ¯ç§’ç”Ÿç”£ï¼‰ã‚’å¢—ã‚„ã—ã¾ã™</li>
        <li>ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯CPSã‚„CPCã‚’å€ç‡ã§å¼·åŒ–ã—ã¾ã™</li>
        <li>ã‚²ãƒ¼ãƒ ã‚’é–‰ã˜ã¦ã„ãŸæ™‚é–“ã¶ã‚“ã®ã‚¯ãƒƒã‚­ãƒ¼ã¯å¾©å¸°æ™‚ã«åŠ ç®—ã•ã‚Œã¾ã™</li>
      </ul>
    </div>
  </div>
</div>

<script>
(() => {
  const buildingsDef = [
    { id:"cursor",  name:"ã‚«ãƒ¼ã‚½ãƒ«",     base: 15,  prod: 0.1,  desc:"è‡ªå‹•ã‚¯ãƒªãƒƒã‚¯è£…ç½®ã€‚æ¯ç§’ +0.1" },
    { id:"grandma", name:"ãŠã°ã‚ã¡ã‚ƒã‚“", base: 100, prod: 1,    desc:"ç†Ÿç·´ã®æ‰‹ä½œã‚Šã€‚æ¯ç§’ +1" },
    { id:"farm",    name:"è¾²å ´",         base: 1100,prod: 8,    desc:"å°éº¦ã‚‚ãƒãƒ§ã‚³ã‚‚è‡ªçµ¦è‡ªè¶³ã€‚æ¯ç§’ +8" },
    { id:"factory", name:"å·¥å ´",         base: 12000,prod: 47,  desc:"å¤§é‡ç”Ÿç”£ãƒ©ã‚¤ãƒ³ã€‚æ¯ç§’ +47" },
    { id:"lab",     name:"ç ”ç©¶æ‰€",       base: 130000,prod: 260,desc:"å‘³ã¨é€Ÿåº¦ã®ç§‘å­¦ã€‚æ¯ç§’ +260" }
  ];
  const upgradesDef = [
    { id:"clickx2",   name:"è·äººã®æŒ‡",       cost:100,  effect:s=>s.cpc *= 2,      show: s=>s.cpc>=1, desc:"ã‚¯ãƒªãƒƒã‚¯åŠ¹ç‡2å€" },
    { id:"cursorx2",  name:"é«˜é€Ÿã‚«ãƒ¼ã‚½ãƒ«",   cost:500,  effect:s=>s.mul.cursor *=2, show: s=>s.owns.cursor>=10, desc:"ã‚«ãƒ¼ã‚½ãƒ«ç”Ÿç”£2å€" },
    { id:"grandmax2", name:"ç§˜ä¼ãƒ¬ã‚·ãƒ”",     cost:2500, effect:s=>s.mul.grandma*=2, show: s=>s.owns.grandma>=10, desc:"ãŠã°ã‚ã¡ã‚ƒã‚“ç”Ÿç”£2å€" },
    { id:"factoryx2", name:"ç„¡é™ãƒ©ã‚¤ãƒ³",     cost:50000,effect:s=>s.mul.factory*=2, show: s=>s.owns.factory>=5, desc:"å·¥å ´ç”Ÿç”£2å€" },
    { id:"labx2",     name:"é‡å­ã‚¯ãƒƒã‚­ãƒ³ã‚°", cost:300000,effect:s=>s.mul.lab*=2,   show: s=>s.owns.lab>=3, desc:"ç ”ç©¶æ‰€ç”Ÿç”£2å€" }
  ];

  const S = { cookies: 0, cpc: 1, owns: {}, mul: {}, bought: {}, clicks:0,
    lastSave: 0, lastQuit: 0, startAt: Date.now() };
  buildingsDef.forEach(b=>{S.owns[b.id]=0; S.mul[b.id]=1});
  upgradesDef.forEach(u=>S.bought[u.id]=false);

  const $ = s => document.querySelector(s);
  const fmt = n => n>=1e9? (n/1e9).toFixed(2)+"B" :
                     n>=1e6? (n/1e6).toFixed(2)+"M" :
                     n>=1e3? (n/1e3).toFixed(2)+"K" : Math.round(n).toString();

  function save(manual=false){
    S.lastSave = Date.now();
    localStorage.setItem('cookie-save-v1', JSON.stringify(S));
    if (manual) $('#lastSave').textContent = new Date(S.lastSave).toLocaleString();
  }
  function load(){
    const raw = localStorage.getItem('cookie-save-v1'); if (!raw) return;
    try{ Object.assign(S, JSON.parse(raw)); }catch(e){}
  }
  function exportSave(){
    const blob = new Blob([btoa(unescape(encodeURIComponent(JSON.stringify(S))))], {type:'text/plain'});
    const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'cookie_save.txt'; a.click();
  }
  function importSave(){
    const inp = document.createElement('input'); inp.type='file'; inp.accept='.txt';
    inp.onchange = () => {
      const f = inp.files[0]; if(!f) return;
      const r = new FileReader();
      r.onload = () => {
        try{
          const json = decodeURIComponent(escape(atob(r.result)));
          Object.assign(S, JSON.parse(json)); renderAll(); alert('ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ');
        }catch(e){ alert('èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ'); }
      };
      r.readAsText(f);
    };
    inp.click();
  }

  function costOf(def, owned){ return Math.ceil(def.base * Math.pow(1.15, owned)); }
  function totalCPS(){ let cps = 0; buildingsDef.forEach(b=>{ cps += S.owns[b.id] * b.prod * (S.mul[b.id]||1); }); return cps; }

  function buildBuildings(){
    const list = $('#buildingsList'); list.innerHTML = '<h3>ğŸ— å»ºç‰©</h3>';
    buildingsDef.forEach(b=>{
      const owned = S.owns[b.id]; const cost = costOf(b, owned);
      const el = document.createElement('div'); el.className='item';
      el.innerHTML = `
        <div>
          <div class="name">${b.name} <span class="muted">Ã—${owned}</span></div>
          <div class="note">${b.desc} / ç¾CPS: <b>${fmt(b.prod * (S.mul[b.id]||1) * owned)}</b></div>
        </div>
        <div>
          <button class="btn buy" data-id="${b.id}">è³¼å…¥ <span class="price">${fmt(cost)}</span></button>
        </div>`;
      list.appendChild(el);
    });
    list.querySelectorAll('.buy').forEach(btn=>{
      btn.onclick = ()=>{
        const id = btn.dataset.id;
        const def = buildingsDef.find(x=>x.id===id);
        const cost = costOf(def, S.owns[id]);
        if (S.cookies >= cost){ S.cookies -= cost; S.owns[id]++; renderAll(); }
      };
    });
  }

  function buildUpgrades(){
    const list = $('#upgradesList'); list.innerHTML = '<h3>ğŸ§ª ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰</h3>';
    upgradesDef.forEach(u=>{
      if (S.bought[u.id]) return; if (!u.show(S)) return;
      const el = document.createElement('div'); el.className='item';
      el.innerHTML = `
        <div>
          <div class="name">${u.name}</div>
          <div class="note">${u.desc}</div>
        </div>
        <div>
          <button class="btn buyU" data-id="${u.id}">è³¼å…¥ <span class="price">${fmt(u.cost)}</span></button>
        </div>`;
      list.appendChild(el);
    });
    list.querySelectorAll('.buyU').forEach(btn=>{
      btn.onclick = ()=>{
        const u = upgradesDef.find(x=>x.id===btn.dataset.id);
        if (S.cookies >= u.cost){ S.cookies -= u.cost; u.effect(S); S.bought[u.id]=true; renderAll(); }
      };
    });
  }

  function renderAll(){
    $('#cookies').textContent = fmt(S.cookies);
    const cps = totalCPS(); $('#cps').textContent = (Math.round(cps*10)/10);
    $('#cpc').textContent = Math.round(S.cpc);
    $('#clickCost').textContent = `ä¾¡æ ¼ ${Math.ceil(15 * Math.pow(1.25, S.cpc-1))}`;
    buildBuildings(); buildUpgrades();
  }

  function clickCost(){ return Math.ceil(15 * Math.pow(1.25, S.cpc-1)); }
  function applyOffline(){
    if (!S.lastQuit) return;
    const secs = Math.floor((Date.now() - S.lastQuit)/1000); if (secs<=0) return;
    const gain = totalCPS()*secs; S.cookies += gain; if (gain>0) alert(`ãŠã‹ãˆã‚Šï¼ç•™å®ˆä¸­ã« ${Math.round(gain)} æšç„¼ã‘ã¾ã—ãŸï¼ˆ${secs}ç§’ï¼‰`);
  }

  document.getElementById('cookieBtn').onclick = () => { S.cookies += S.cpc; S.clicks++; renderAll(); };
  document.getElementById('buyClick').onclick = () => {
    const cost = clickCost(); if (S.cookies >= cost){ S.cookies -= cost; S.cpc++; renderAll(); }
  };
  document.getElementById('saveBtn').onclick = ()=>{ save(true); alert('ã‚»ãƒ¼ãƒ–ã—ã¾ã—ãŸ'); };
  document.getElementById('exportBtn').onclick = exportSave;
  document.getElementById('importBtn').onclick = importSave;
  document.getElementById('resetBtn').onclick = ()=>{ if(confirm('æœ¬å½“ã«åˆæœŸåŒ–ã—ã¾ã™ã‹ï¼Ÿ')){ localStorage.removeItem('cookie-save-v1'); location.reload(); } };

  function tick(){ const cps = totalCPS(); S.cookies += cps/10; renderAll(); }
  setInterval(tick, 100);
  setInterval(()=>save(false), 10000);

  load(); applyOffline(); renderAll();
  setInterval(()=>{
    const sec = Math.floor((Date.now()-S.startAt)/1000);
    document.getElementById('playtime').textContent = `${Math.floor(sec/3600)}:${String(Math.floor((sec%3600)/60)).padStart(2,'0')}:${String(sec%60).padStart(2,'0')}`;
    document.getElementById('clicks').textContent = S.clicks;
    document.getElementById('lastSave').textContent = S.lastSave? new Date(S.lastSave).toLocaleString():'-';
    document.getElementById('lastQuit').textContent = S.lastQuit? new Date(S.lastQuit).toLocaleString():'-';
  }, 1000);

  window.addEventListener('beforeunload', ()=>{ S.lastQuit = Date.now(); save(false); });
})();
</script>
</body>
</html>
